// 1) 김치프리미엄 전용 스크립트
//@version=5
indicator("김프 프리미엄", overlay=false)

symbol   = input.string(title="코인 심볼 (영문)", defval="LEVER")
exchange = input.string(title="해외 거래소 심볼", defval="GATEIO", options=["BINANCE","BYBIT","OKX","GATEIO", "BITGET"])

krwSym      = "BITHUMB:" + symbol + "KRW"
usdSym      = exchange + ":" + symbol + "USDT"
usdtRateSym = "UPBIT:USDTKRW"

krwPrice = request.security(krwSym,      timeframe.period, close)
usdPrice = request.security(usdSym,      timeframe.period, close)
usdtRate = request.security(usdtRateSym, timeframe.period, close)

kimchi = krwPrice / (usdPrice * usdtRate) * 100 - 100

plot(kimchi,
     title="김치프리미엄(%)",
     color=color.orange,
     linewidth=2)

hline(0,
      title="0%",
      color=color.gray,
      linewidth=1)